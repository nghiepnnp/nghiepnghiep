$(document).ready(function () {
    $('.changeStatus').click(function (e) {
        e.preventDefault();
        const heo = $(this);
        const id = $(this).data('id');
        const controller = $(this).data('controller');
        $.ajax({
            url: "/admin/" + controller + "/changeStatus",
            data: { id: id },
            dataType: 'json',
            type: 'POST',
            success: function (response) {
                console.log(response)
                if (response.Status == 1) {
                    heo.prop('checked', 'checked');
                    toastr.success('Thay đổi trạng thái thành công! id=' + id);
                } else {
                    heo.prop('checked', '');
                    toastr.success('Thay đổi trạng thái thành công! id=' + id);
                }
            }
        });
    });
});

// Xử lý đăng nhập Admin
$(document).ready(function () {
    $('#btn_ladmin').click(function (e) {
        e.preventDefault();
        $.ajax({
            url: "/admin/login",
            data: { name: $('input[name=Name]').val(), pass: $('input[name=Password]').val() },
            dataType: 'json',
            type: 'POST',
            success: function (response) {
                console.log(response)
                if (response.Status == 1) {
                    $('#btn_ladmin').val('Thông tin tài khoản không chính xác');
                } else if (response.Status == 2) {
                    $('#btn_ladmin').val('Mật khẩu không chính xác');
                } else {
                    $(location).prop('href', 'Category');
                }
            }
        });
    });
});







$(document).ready(function () {
    $('.StatusOrder').off('click').on('click', (function (e) {
        e.preventDefault();
        const id = $(this).data('id');
        const status = $(this).data('status');
        $('#modal-secondary').on('shown.bs.modal', function () {
            $(this).find("select").val(status).end();
        });
        $('.changeStatusOrder').off('click').on('click', (function (e) {
            e.preventDefault();
            const optionS = $('#optionStatus').val();
            $.ajax({
                url: "/admin/order/changeStatus",
                data: { id: id, Ss: optionS },
                dataType: 'json',
                type: 'POST',
                success: function (res) {
                    console.log(res)
                    switch (parseInt(res.Status)) {
                        case 1:
                            $('.ba' + id).html('Chờ xử lý');
                            $('.ba' + id).addClass('badge-secondary');
                            $('#modal-secondary').modal('hide');
                            $('#modal-secondary').on('hidden.bs.modal', function () {
                                $(this).find("select").val('1').end();
                            });
                            break;
                        case 2:
                            $('.ba' + id).html('Đang giao hàng');
                            $('.ba' + id).addClass('badge-warning');
                            $('#modal-secondary').modal('hide');
                            $('#modal-secondary').on('hidden.bs.modal', function () {
                                $(this).find("select").val('1').end();
                            });
                            break;
                        case 3:
                            $('.ba' + id).html('Đã giao hàng');
                            $('.ba' + id).addClass('badge-success');
                            $('#modal-secondary').modal('hide');
                            $('#modal-secondary').on('hidden.bs.modal', function () {
                                $(this).find("select").val('1').end();
                            });
                            break;
                        case 4:
                            $('.ba' + id).html('Đã hủy đơn hàng');
                            $('.ba' + id).addClass('badge-dark');
                            $('#modal-secondary').modal('hide');
                            $('#modal-secondary').on('hidden.bs.modal', function () {
                                $(this).find("select").val('1').end();
                            });
                            break;
                    }
                }
            });
        }));
    }));

});




// <%switch(parseInt(cat.Status)){%>
//     <%case 1: %>
//     <small class="badge badge-secondary ba<%= cat.IDO%>"> Đang xử lý</small>
//     <%break; case 2: %>
//     <small class="badge badge-warning ba<%= cat.IDO%>"> Đang giao</small>
//     <%break case 3: %>
//     <small class="badge badge-success ba<%= cat.IDO%>"> Đã giao</small>
//     <%break; case 4: %>
//     <small class="badge badge-danger ba<%= cat.IDO%>"> Đã hủy</small>
//     <%break; %>
// <%}%>